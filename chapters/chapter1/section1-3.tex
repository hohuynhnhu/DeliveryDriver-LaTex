\section{Cơ sở dữ liệu, Authentication và Deployment}

\subsection{PostgreSQL (Supabase)}

Hệ thống sử dụng PostgreSQL thông qua Supabase platform. Dữ liệu được lưu trữ và đồng bộ thông qua Supabase Database.

\textbf{Các bảng chính:}
\begin{itemize}
  \item orders: Thông tin đơn hàng
  \item drivers: Thông tin tài xế
  \item routes: Tuyến đường tối ưu
  \item profiles: Hồ sơ người dùng
\end{itemize}

\subsection{Supabase Authentication}

Hệ thống sử dụng Supabase Authentication để thực hiện đăng ký, đăng nhập và quản lý phiên làm việc của người dùng. Sau khi xác thực thành công, thông tin người dùng được liên kết với bảng \texttt{profiles}.

\textbf{Tính năng:}
\begin{itemize}
    \item Email/Password authentication
    \item JWT-based sessions
    \item Row Level Security (RLS) policies
    \item Real-time subscriptions
\end{itemize}

\subsection{Docker}

Docker được sử dụng để containerize ứng dụng backend, đảm bảo môi trường development và production nhất quán.

\textbf{Các bảng chính:}
\begin{itemize}
  \item orders: Thông tin đơn hàng
  \item drivers: Thông tin tài xế
  \item routes: Tuyến đường tối ưu
  \item profiles: Hồ sơ người dùng
\end{itemize}

\subsection{Thuật toán tối ưu hóa}

Hệ thống áp dụng các thuật toán để tối ưu tuyến đường giao hàng:

\begin{itemize}
    \item \textbf{Nearest Neighbor}: Tạo tuyến đường ban đầu nhanh chóng
    \item \textbf{2-opt}: Cải thiện tuyến đường bằng cách loại bỏ crossings
    \item \textbf{OSRM API}: Tính toán tuyến đường thực tế trên bản đồ OpenStreetMap
\end{itemize}

Kết hợp cả hai thuật toán giúp giảm 10-30\% tổng quãng đường so với cách phân công thủ công.

\subsubsection{OSRM (Open Source Routing Machine)}

OSRM là routing engine mã nguồn mở cho OpenStreetMap, cung cấp các API để tính toán tuyến đường.

\textbf{Các API chính:}
\begin{itemize}
    \item \textbf{Route Service}: Tính tuyến đường nhanh nhất giữa các điểm
    \item \textbf{Table Service}: Ma trận khoảng cách giữa nhiều điểm
    \item \textbf{Match Service}: Map matching GPS traces lên đường
    \item \textbf{Trip Service}: Giải quyết Traveling Salesman Problem
\end{itemize}

\textbf{Ưu điểm so với Google Maps:}
\begin{itemize}
    \item Miễn phí, không giới hạn requests
    \item Có thể tự host server
    \item Dữ liệu OpenStreetMap cập nhật liên tục
    \item API đơn giản, response nhanh
\end{itemize}

\textbf{Ứng dụng trong dự án:}
\begin{itemize}
    \item Tính khoảng cách và thời gian thực tế giữa các điểm giao hàng
    \item Lấy tọa độ waypoints để vẽ tuyến đường trên Leaflet map
    \item Tối ưu thứ tự giao hàng với Trip Service
    \item Hiển thị hướng dẫn turn-by-turn cho tài xế
\end{itemize}